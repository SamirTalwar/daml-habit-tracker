module Main where

template Habit
  with
    owner : Party
    name : Text
  where
    ensure name /= ""
    signatory owner

    controller owner can
      nonconsuming Record : ContractId Recording
        with
          dateCompleted : Date
        do
          create Recording with
            habit = this
            dateCompleted

template Recording
  with
    habit : Habit
    dateCompleted : Date
  where
    signatory habit.owner
