module Main where

template Habit
  with
    owner : Party
    name : Text
  where
    ensure name /= ""
    signatory owner

    controller owner can
      nonconsuming Record : ContractId Recording
        with
          timestamp : Time
        do
          create Recording with
            habit = this
            timestamp = timestamp

template Recording
  with
    habit : Habit
    timestamp : Time
  where
    signatory habit.owner
